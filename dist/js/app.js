"use strict";var $$=function(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))},render=function(e,t){e.innerHTML=t},toggleAnimation=function(e,t){e.classList.add(t),e.addEventListener("animationend",function(){e.classList.remove(t)},!1)},dropInOutChanceAnimation=function(e){var t,a=e.el,n=e.inContent,i=e.outContent;void 0!==n&&void 0!==i&&(t='\n                    <div class="game--info__chance__num__list">\n                        <div>'.concat(n,"</div>\n                        <div>").concat(i,"</div>\n                    </div>\n                ")),a.innerHTML=t},animateButtonToPlayer=function(){var a=0;gameState.allowClickWhenAnimating=!1,render(gameInfoDisplayTitleEl,"<span class='red'>System turn</span>");var n=setInterval(function(){if(a===gameState.questionListBySystem.length)return clearInterval(n),gameState.allowClickWhenAnimating=!0,void render(gameInfoDisplayTitleEl,"<span class='green'>Your turn</span>");var e=gameState.questionListBySystem[a],t=$$('.game-label[data-id="'.concat(e,'"]'),app)[0];t.classList.add("on"),setTimeout(function(){t.classList.remove("on")},config.timeout.animateButtonToPlayer_lightEffect),a++},config.interval.animateButtonToPlayer)},generateQuestionListBySystem=function(e,t){for(var a=e.length,n=[],i=0;i<t;i++){var l=Math.floor(Math.random()*a);n.push(e[l])}return n},isPlayerAnsweredAllQuestions=function(){return gameState.answerListByPlayer.length===gameState.questionListBySystem.length},handlePlayerClickButton=function(e){if(!(gameState.answerListByPlayer.length>=gameState.questionListBySystem.length||!1===gameState.allowClickWhenAnimating)&&"DIV"===e.target.tagName&&-1<e.target.className.indexOf("game-label")){var t=e.target,a=t.getAttribute("data-id");gameState.answerListByPlayer.push(a),renderRemainingTap(),t.classList.add("on"),setTimeout(function(){t.classList.remove("on")},config.timeout.handlePlayerClickButton_lightEffect),isPlayerAnsweredAllQuestions()&&(checkGameResult()?(gameState.status="WIN",gameState.level++,setTimeout(function(){initTheGame({isNewLevel:!0}),renderRemainingTap()},config.timeout.handlePlayerClickButton_afterClick)):0<--gameState.noOfRetryAllowed?(gameState.status="RETRY",setTimeout(function(){initTheGame({isNewLevel:!1}),renderRemainingTap()},config.timeout.handlePlayerClickButton_afterClick)):(gameState.status="OVER",setTimeout(function(){renderDisplayInfo()},config.timeout.handlePlayerClickButton_afterClick),clearInterval(gameState.duration.timeId)))}},resetAnswerListByPlayer=function(){gameState.answerListByPlayer.length=0},checkGameResult=function(){return JSON.stringify(gameState.questionListBySystem)===JSON.stringify(gameState.answerListByPlayer)},renderDisplayInfo=function(){render(gameInfoLevelNumberEl,"".concat(gameState.level)),gameState.noOfRetryAllowed===config.noOfRetryAllowed&&render(gameInfoChanceEl,"".concat(gameState.noOfRetryAllowed)),"WIN"===gameState.status&&toggleAnimation(gameInfoLevelNumberEl,"grow-animation"),"OVER"!==gameState.status&&"RETRY"!==gameState.status||dropInOutChanceAnimation({el:gameInfoChanceEl,inContent:"".concat(gameState.noOfRetryAllowed),outContent:"".concat(gameState.noOfRetryAllowed+1)}),"OVER"===gameState.status&&(setTimeout(function(){render(gameInfoDisplayTitleEl,"<span>End</span>"),render(userGameResultLevelEl,gameState.level),render(userGameResultTimeEl,"".concat(getGameDurationInSeconds()," seconds"))},config.timeout.handlePlayerClickButton_afterClick),setTimeout(function(){gamePageEl.classList.remove("is-active"),thankYouPageEl.classList.add("is-active")},config.timeout.handlePlayerClickButton_afterClick+config.timeout.thankYouPage)),null===gameState.status&&(render(gameInfoDisplayTitleEl,"&nbsp;"),render(timerEl,0))},initTheGame=function(e){var t=e.isNewLevel;resetAnswerListByPlayer(),renderDisplayInfo(),t&&(gameState.questionListBySystem=generateQuestionListBySystem(gameState.possibilities,gameState.level),renderRemainingTap()),setTimeout(function(){animateButtonToPlayer()},config.timeout.initTheGame)},resetForRetryTheGame=function(){gameState.status=null,gameState.noOfRetryAllowed=config.noOfRetryAllowed},initTimer=function(){gameState.duration.startTime=Date.now(),gameState.duration.timeId=setInterval(function(){renderTimer()},1e3)},getGameDurationInSeconds=function(){return Math.floor((Date.now()-gameState.duration.startTime)/1e3)},renderTimer=function(){var e=getGameDurationInSeconds();render(timerEl,e)},renderRemainingTap=function(){var e="Tap<br>".concat(gameState.questionListBySystem.length-gameState.answerListByPlayer.length);render(remainingTapEl,e)},config={startLevel:1,noOfRetryAllowed:2,timeout:{handlePlayerClickButton_lightEffect:200,handlePlayerClickButton_afterClick:1e3,sendForm:2e3,thankYouPage:1e3,animateButtonToPlayer_lightEffect:500,initTheGame:1e3},interval:{animateButtonToPlayer:850}},gameState={level:config.startLevel,noOfRetryAllowed:config.noOfRetryAllowed,possibilities:["blue","red","yellow","green"],questionListBySystem:[],answerListByPlayer:[],status:null,allowClickWhenAnimating:!1,duration:{startTime:null,timeId:null}},app=$$("#mainApp")[0],gameInfoDisplayTitleEl=$$(".game--info__display__title",app)[0],gameInfoLevelNumberEl=$$(".game--info__level__num",app)[0],gameInfoChanceEl=$$(".game--info__chance__num",app)[0],timerEl=$$(".game--info__timer__time",app)[0],remainingTapEl=$$(".game--info__remaining-tap",app)[0],gameInputWrapperEl=$$(".game--input-wrapper",app)[0],startBtnEl=$$("#game-start-btn",app)[0],retryBtnEl=$$("#game-retry-btn",app)[0],welcomePageEl=$$("#welcomePage",app)[0],gamePageEl=$$("#gamePage",app)[0],thankYouPageEl=$$("#thankYouPage",app)[0],userGameResultLevelEl=$$("#user-game-result-level",app)[0],userGameResultTimeEl=$$("#user-game-result-time",app)[0],clickOrTouchEvent="ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints?"touchstart":"click";gameInputWrapperEl.addEventListener(clickOrTouchEvent,handlePlayerClickButton),startBtnEl.addEventListener("click",function(){resetForRetryTheGame(),initTheGame({isNewLevel:!0}),thankYouPageEl.classList.remove("is-active"),welcomePageEl.classList.remove("is-active"),gamePageEl.classList.add("is-active"),initTimer()},!0),retryBtnEl.addEventListener("click",function(){thankYouPageEl.classList.remove("is-active"),gamePageEl.classList.remove("is-active"),welcomePageEl.classList.add("is-active")},!0);